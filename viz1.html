---
layout: articles
title: Abilities
---
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" href="assets/tab1_ability/tab1_ability.css"/>
<link rel="stylesheet" href="assets/tab1_ability/lib/jquery-ui.css">
<link rel="stylesheet" href="assets/tab1_ability/lib/jquery.dataTables.min.css">








<div class="container">

  <div class="flourish-embed flourish-hierarchy" data-src="visualisation/13939565"><script src="https://public.flourish.studio/resources/embed.js"></script></div>

</div>





<div class="row">
  <div class="col-md-10">
    <h1 style="margin:64px">Ability Recommendation</h1>  
  </div>
  <div class="col-md-2">
    <button id="opener" style="display: inline; margin:64px">Tutorial</button>
  </div>
</div>

<div id="dialog" title="Graph tutorial"  class="modal" style="display:none;">
    <div class="modal-content">
    <span class="close">&times;</span>
    <p>
      <b style="color: #E76F51;">Information</b>
      <ul>
        <li>Every pokemon has a `Tier` attribute, among them, the `OU` rank signals the strongest pokemons.</li>
        <li>Here we sort the top 10 abilities by their occurrence in the `OU` pokemons.</li> 
      </ul>    
    </p>
    
    <p>
      <b style="color: #E76F51;">Selection</b>
      <ul>
        <li>Click on each bar to view detailed information about the ability.</li>
      </ul>
    </p>
    
    <p>
      <b style="color: #E76F51;">Graph</b>
      <ul>
        <li>A bar chart showing the occurrence of an ability among the `OU` pokemons.</li>
      </ul>
    </p>
    


</div>

</div>

<div class="container">

  <div id="bar-chart"></div>
  
  <div id="bar-info" style="margin-top: 20px;"></div>
  
  <div id="tooltip" style="position: absolute; opacity: 0; pointer-events: none; background-color: #2A9D8F; color: white; padding: 5px; border-radius: 5px;"></div>

</div>



<script src="assets/tab1_ability/lib/d3.v4.min.js"></script>
<script src="assets/tab1_ability/lib/jquery.min.js"></script>
<script src="assets/tab1_ability/lib/jquery-ui.js"></script>



<script>
  var modal = document.getElementById("dialog");

  document.getElementById("opener").addEventListener("click", function() {
      modal.style.display = "block";
  });
  
  document.getElementsByClassName("close")[0].addEventListener("click", function() {
      modal.style.display = "none";
  });
  
  window.addEventListener("click", function(event) {
      if (event.target == modal) {
          modal.style.display = "none";
      }
  });
  
</script>
  
<script>
  d3.csv('assets/tab1_ability/data/ability_description.csv', function(error, descriptionData) {
    if (error) throw error;

    d3.csv('assets/tab1_ability/data/top10_abilities.csv', function(error, data) {
      if (error) throw error;

      data.forEach(function(d) {
        d.Count = +d.Count;
      });

    let margin = {top: 20, right: 20, bottom: 70, left: 40},
        width = 600 - margin.left - margin.right,
        height = 300 - margin.top - margin.bottom;

    let x = d3.scaleBand().range([0, width]).padding(0.1);
    let y = d3.scaleLinear().range([height, 0]);

    let svg = d3.select("#bar-chart").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", 
              "translate(" + margin.left + "," + margin.top + ")");

    x.domain(data.map(d => d.Ability));
    y.domain([0, d3.max(data, d => d.Count)]);

    svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x))
      .selectAll("text")
        .attr("transform", "rotate(-45)")
        .style("text-anchor", "end");

    svg.append("g")
        .call(d3.axisLeft(y))
        .append("text")
        .attr("fill", "#000")
        .attr("transform", "rotate(-90)")
        .attr("y", -margin.left)
        .attr("x", -height/2)
        .attr("dy", "1em")
        .attr("text-anchor", "middle")
        .text("Occurance Count");
    

    svg.selectAll(".bar")
        .data(data)
      .enter().append("rect")
        .attr("class", "bar")
        .attr("x", d => x(d.Ability))
        .attr("width", x.bandwidth())
        .attr("y", d => y(d.Count))
        .attr("height", d => height - y(d.Count))
        .attr("fill", "#2A9D8F")


        .on('click', function(d, i) {
          // 找到对应的描述
          let matchedDescription = descriptionData.find(desc => desc.Ability === d.Ability);
          let abilityDescription = matchedDescription ? matchedDescription.description : 'Description not found';
      
          d3.select('#bar-info')
              .html(`
                  <p style="display: inline-block;"><span style="color:#E9C46A;">${d.Ability}</span>: ${abilityDescription}</p>
              `);
      })
      
        .on("mouseover", function(d) {
          let html = `Ability: ${d.Ability}<br/>Count: ${d.Count}`;
          d3.select("#tooltip")
              .style("opacity", 1)
              .html(html)
              .style('left', (event.pageX + 10) + 'px') 
              .style('top', (event.pageY + 10) + 'px');
      })
      .on("mouseout", function(d) {
          d3.select("#tooltip")
              .style("opacity", 0);
      });
  }); 
}); 
</script>



